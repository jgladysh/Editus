/** editus v0.0.1 **/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.editus=e()}}(function(){return function e(t,n,o){function i(d,a){if(!n[d]){if(!t[d]){var s="function"==typeof require&&require;if(!a&&s)return s(d,!0);if(r)return r(d,!0);var u=new Error("Cannot find module '"+d+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[d]={exports:{}};t[d][0].call(c.exports,function(e){var n=t[d][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[d].exports}for(var r="function"==typeof require&&require,d=0;d<o.length;d++)i(o[d]);return i}({1:[function(e,t,n){"use strict";function o(e){this.editorId=e,this.content=function(){return document.getElementById(e)},this.startValue=e?document.getElementById(e).innerHTML:void 0,this.EditCommand=void 0,this.stack=void 0,this.timer=0,this.canRedo=!1,this.canUndo=!1,this.wasUndo=!1,this.position=0,this.executeOnInsert=!1,this.cursorChange=!1,this.meta=!1,this.popUp=!1,this.chosen=void 0,this.$current=void 0,this.popoverContainerId="popoverContainer_"+e,this.popoverId="popover_"+e,this.popoverContainer=e?document.getElementById(this.popoverContainerId):void 0,this.popov=e?document.getElementById(this.popoverId):void 0,r(this),i(this.editorId,this),this.setHighlightingWords=function(e){e&&e.length>=0&&(this.keyWordsArray=e)}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./main").makeEditable,r=e("./undo_redo").initStack,d=function(e){return new o(e)};n.initEditus=d},{"./main":4,"./undo_redo":6}],2:[function(e,t,n){(function(e){"use strict";function t(e,t){for(var n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,function(t){var n=document.createRange();return n.selectNode(t),n.compareBoundaryPoints(Range.END_TO_END,e)<1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1),o=0;n.nextNode();)o+=n.currentNode.length;return 3===e.startContainer.nodeType&&(o+=e.startOffset),o}function o(e,t){function n(e){if(3===e.nodeType){var r=o+e.length;if(t>=o&&r>=t)throw window.getSelection().collapse(e,t-o),i;o=r}else for(var d=e.firstChild;d;)n(d),d=d.nextSibling}var o=0,i={};try{n(e)}catch(r){if(r!==i)throw r}}function i(){var e=window.getSelection().getRangeAt(0),t=document.createElement("span");t.className="anchor",e.insertNode(t);var n=$(".anchor").offset();return t.parentNode.removeChild($(".anchor")[0]),n}Object.defineProperty(n,"__esModule",{value:!0}),"undefined"!=typeof window?window.jquery:"undefined"!=typeof e?e.jquery:null,n.getCursorCoordinates=i,n.setCaretCharIndex=o,n.getCharacterOffsetWithin=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(t){"use strict";function o(e,t){if(t.keyWordsArray)if(e.childNodes.length>0)for(var n=0;n<e.childNodes.length;n++)(e.childNodes[n].data&&""!==e.childNodes[n].data||"DIV"===e.childNodes[n].nodeName)&&o(e.childNodes[n],t);else{var i=r(t.keyWordsArray,e);d(i,t)}}function i(e,t){for(var n,o=new RegExp("\\b"+e+"\\b((?!\\W(?=\\w))|(?=\\s))","gi"),i=[];null!==(n=o.exec(t));)i.push(n.index);return i}function r(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o],d=i(r,t.nodeValue);if(d.length>0){for(var a=[],s=0;s<d.length;s++){var u=document.createRange();u.setStart(t,d[s]),u.setEnd(t,d[s]+r.length),a[s]=u}n=n.concat(a)}}return n}function d(e,t){for(var n=0;n<e.length;n++){var o=document.createElement("span");o.className="highlighted",$(o).data(t.editorId,e[n].toString()),e[n].surroundContents(o)}}function a(e,t){if(t.keyWordsArray){var n=window.getSelection(),o=n.anchorNode,i=o.nextElementSibling,r=t.content(),d=n.baseNode.parentElement;if(o.length===n.anchorOffset&&i&&"SPAN"===i.nodeName&&($(i).contents().unwrap(),r.normalize()),"highlighted"===d.className||"highlighted"===n.baseNode.className)for(var a=n.getRangeAt(0),s=c(a,r),l=$(".highlighted"),f=0;f<l.length;f++){var p=$(l[f]).text();new RegExp(t.keyWordsArray.map(function(e){return"^"+e+"$"}).join("|"),"gi").test(p)||($(l[f]).contents().unwrap(),r.normalize(),13!==e.keyCode&&u(r,s))}}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./caret"),u=s.setCaretCharIndex,c=s.getCharacterOffsetWithin;"undefined"!=typeof window?window.jquery:"undefined"!=typeof t?t.jquery:null,n.checkHighlighted=a,n.checkEveryTag=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caret":2}],4:[function(e,t,n){(function(t){"use strict";function o(e,t,n){var o=new $.Deferred;if(n.popUp&&(38===e.keyCode||40===e.keyCode||13===e.keyCode))return e.preventDefault(),m(e,n),o.reject();if(n.popUp&&w(n),e.shiftKey&&32===e.keyCode){e.preventDefault();var i=c();return v(i.top+25,i.left,t,n),o.reject()}return e.metaKey&&65!==e.keyCode&&88!==e.keyCode&&86!==e.keyCode&&67!==e.keyCode&&(e.preventDefault(),n.meta=!0,e.metaKey&&90===e.keyCode&&n.canUndo?n.stack.undo():e.metaKey&&89===e.keyCode&&n.canRedo&&n.stack.redo()),o.promise()}function i(e,t,n,o){"Range"!==window.getSelection().type&&((32===e.keyCode||13===e.keyCode||8===e.keyCode||o.meta)&&(o.meta=!1),37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&h(e,o),r(t,o))}function r(e,t){var n=new $.Deferred;if(null!==e.firstChild){var o=window.getSelection(),i=o.getRangeAt(0),r=f(i,e),d=o.baseOffset;if("Range"===o.type)return n.resolve();if(g(e,t),t.meta&&0===d&&"DIV"===o.baseNode.nodeName||!t.meta&&0===d)return n.promise();l(e,r)}return n.promise()}function d(e,t){var n=e,o=t.content();if("DIV"!==o.nodeName)throw"Editable element must be DIV";a(t),s(o,n,t)}function a(e){var t="<div style = 'position : absolute' class = 'popoverContainer' id='"+e.popoverContainerId+'\'><a href="#" title="" data-toggle="popover" id=\''+e.popoverId+'\'data-content="" data-placement="bottom"></a></div>';$(e.content()).after(t)}function s(e,t,n){e.onkeyup=function(o){i(o,e,t,n)},e.onkeydown=function(e){o(e,t,n).then(C(250,e,n),function(){})},e.onmouseup=function(){r(e,n).then(C(0,event,n),function(){})}}Object.defineProperty(n,"__esModule",{value:!0}),"undefined"!=typeof window?window.jquery:"undefined"!=typeof t?t.jquery:null;var u=e("./caret"),c=u.getCursorCoordinates,l=u.setCaretCharIndex,f=u.getCharacterOffsetWithin,p=e("./highlighting"),h=p.checkHighlighted,g=p.checkEveryTag,y=e("./suggestion"),v=y.initialisePopover,m=y.listScroll,w=y.destroyPopUp,C=e("./undo_redo").execute;n.makeEditable=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caret":2,"./highlighting":3,"./suggestion":5,"./undo_redo":6}],5:[function(e,t,n){(function(t){"use strict";function o(e,t,n,o){var i=o.popoverContainer(),a=o.popov();o.chosen=void 0,o.$current=void 0,$(a).popover({html:!0,content:p}),i.style.top=e+"px",i.style.left=t+"px",$(a).popover("show"),o.popUp=!0,$(".popover").mouseleave(function(){d(o),o.popUp=!1}),$(".popover").on("mousedown","a",function(e){e.preventDefault(),o.chosen=e.currentTarget.innerText,d(o),o.popUp=!1,r(document.createTextNode(o.chosen),o),f(e,o),s(0,e,o)})}function i(e,t){var n=e.keyCode,o=$(".list-group-item"),i=o.filter(".selected");return o.removeClass("selected"),13===n&&t.$current?(t.chosen=$(t.$current[0]).html(),d(t),t.popUp=!1,void r(document.createTextNode(t.chosen),t)):(40===n?t.$current=!i.length||i.is(":last-child")?o.eq(0):i.next():38===n&&(t.$current=!i.length||i.is(":first-child")?o.last():i.prev()),void t.$current.addClass("selected"))}function r(e,t){var n=t.content(),o=window.getSelection().getRangeAt(0),i=l(o,n);o.insertNode(e),n.normalize(),c(n,i+e.length),t.executeOnInsert=!0}function d(e){$(e.popov()).popover("destroy")}var a=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./undo_redo").execute,u=e("./caret"),c=u.setCaretCharIndex,l=u.getCharacterOffsetWithin,f=e("./highlighting").checkHighlighted;"undefined"!=typeof window?window.jquery:"undefined"!=typeof t?t.jquery:null;a("undefined"!=typeof window?window.jquery:"undefined"!=typeof t?t.jquery:null);"undefined"!=typeof window?window.bootstrap:"undefined"!=typeof t?t.bootstrap:null;var p=$.parseHTML('<div class="list-group"><a href="#" class="list-group-item">Item 1</a><a href="#" class="list-group-item">Item 2</a> <a href="#" class="list-group-item">Item 3</a> <a href="#" class="list-group-item">Item 4</a> <a href="#" class="list-group-item">Item 5</a> </div>')[0];n.initialisePopover=o,n.listScroll=i,n.destroyPopUp=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caret":2,"./highlighting":3,"./undo_redo":6}],6:[function(e,t,n){(function(t){"use strict";function o(e){function t(){e.canRedo=e.stack.canRedo(),e.canUndo=e.stack.canUndo()}var n=e.content();e.stack=new Undo.Stack,e.EditCommand=Undo.Command.extend({constructor:function(e,t,n,o,i){this.textarea=e,this.oldValue=t,this.newValue=n,this.undoPosition=o,this.redoPosition=i},execute:function(){},undo:function(){this.textarea.innerHTML=this.oldValue,e.startValue=n.innerHTML,r(n,this.undoPosition),e.wasUndo=!0},redo:function(){this.textarea.innerHTML=this.newValue,e.startValue=n.innerHTML,r(n,this.redoPosition)}}),t(),e.stack.changed=function(){t()}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./caret"),r=i.setCaretCharIndex,d=i.getCharacterOffsetWithin;"undefined"!=typeof window?window.jquery:"undefined"!=typeof t?t.jquery:null,"undefined"!=typeof window?window.undo:"undefined"!=typeof t?t.undo:null;var a=function(e,t,n){var o=n.content();n.meta||((n.wasUndo||!o.hasChildNodes())&&(e=0),clearTimeout(n.timer),n.timer=setTimeout(function(){var e=window.getSelection().getRangeAt(0),i=!1,r=o.innerHTML,a=n.position,s=d(e,o);return a===s||!n.executeOnInsert&&13===t.keyCode?void(n.wasUndo=!1):(n.wasUndo?a=n.stack.stackPosition>=0?n.stack.commands[n.stack.stackPosition].redoPosition:n.stack.commands[0].redoPosition:a!==s&&r===n.startValue?n.cursorChange?(n.stack.commands[n.stack.commands.length-1].redoPosition=s,i=!0):n.cursorChange=!0:n.cursorChange=!1,i||n.stack.execute(new n.EditCommand(o,n.startValue,r,a,s)),n.startValue=r,n.position=s,n.wasUndo=!1,void(n.executeOnInsert=!1))},e))};n.execute=a,n.initStack=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caret":2}]},{},[1])(1)});